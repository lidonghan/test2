NTFS格式下加、解密问题   

　　NTFS是WinNT以上版本支持的一种提供安全性、可靠性的高级文件系统。在Win2000和WinXP中，NTFS还可以提供诸如文件和文件夹权限、加密、磁盘配额和压缩这样的高级功能。

　　一、加密文件或文件夹
　　步骤一：打开Windows资源管理器。
　　步骤二：右键单击要加密的文件或文件夹，然后单击“属性”。 
　　步骤三：在“常规”选项卡上，单击“高级”。选中“加密内容以便保护数据”复选框

　在加密过程中还要注意以下五点：
　　1.要打开“Windows 资源管理器”，请单击“开始→程序→附件”，然后单击“Windows 资源管理器”。
　　2.只可以加密NTFS分区卷上的文件和文件夹，FAT分区卷上的文件和文件夹无效。
　　3.被压缩的文件或文件夹也可以加密。如果要加密一个压缩文件或文件夹，则该文件或文件夹将会被解压。
　　4.无法加密标记为“系统”属性的文件，并且位于systemroot目录结构中的文件也无法加密。
　　5.在加密文件夹时，系统将询问是否要同时加密它的子文件夹。如果选择是，那它的子文件夹也会被加密，以后所有添加进文件夹中的文件和子文件夹都将在添加时自动加密。

　　二、解密文件或文件夹
　　步骤一：打开Windows资源管理器。
　　步骤二：右键单击加密文件或文件夹，然后单击“属性”。 
　　步骤三：在“常规”选项卡上，单击“高级”。 
　　步骤四：清除“加密内容以便保护数据”复选框。

　　同样，我们在使用解密过程中要注意以下问题：
　　1.要打开“Windows资源管理器”，请单击“开始→程序→附件”，然后单击“Windows资源管理器”。
　　2.在对文件夹解密时，系统将询问是否要同时将文件夹内的所有文件和子文件夹解密。如果选择仅解密文件夹，则在要解密文件夹中的加密文件和子文件夹仍保持加密。但是，在已解密文件夹内创立的新文件和文件夹将不会被自动加密。

　　以上就是使用文件加、解密的方法！而在使用过程中我们也许会遇到以下一些问题，在此作以下说明：
　　1.高级按钮不能用
　　原因：加密文件系统(EFS)只能处理NTFS文件系统卷上的文件和文件夹。如果试图加密的文件或文件夹在FAT或FAT32卷上，则高级按钮不会出现在该文件或文件夹的属性中。
　　解决方案：
　　将卷转换成带转换实用程序的NTFS卷。 
　　打开命令提示符。
　　键入：Convert [drive]/fs:ntfs
　　(drive 是目标驱动器的驱动器号)
　　2.当打开加密文件时，显示“拒绝访问”消息
 　 原因：加密文件系统(EFS)使用公钥证书对文件加密，与该证书相关的私钥在本计算机上不可用。
　　解决方案：
　　查找合适的证书的私钥，并使用证书管理单元将私钥导入计算机并在本机上使用。 
　　3.用户基于NTFS对文件加密，重装系统后加密文件无法被访问的问题的解决方案(注意：重装Win2000/XP前一定要备份加密用户的证书)：
　　步骤一：以加密用户登录计算机。 
　　步骤二：单击“开始→运行”，键入“mmc”，然后单击“确定”。 
　　步骤三：在“控制台”菜单上，单击“添加/删除管理单元”，然后单击“添加”。
　　步骤四：在“单独管理单元”下，单击“证书”，然后单击“添加”。
　　步骤五：单击“我的用户账户”，然后单击“完成”(如图2，如果你加密用户不是管理员就不会出现这个窗口，直接到下一步) 。
　　步骤六：单击“关闭”，然后单击“确定”。 
　　步骤七：双击“证书──当前用户”，双击“个人”，然后双击“证书”。
　　步骤八：单击“预期目的”栏中显示“加密文件”字样的证书。
　　步骤九：右键单击该证书，指向“所有任务”，然后单击“导出”。
　　步骤十：按照证书导出向导的指示将证书及相关的私钥以PFX文件格式导出(注意：推荐使用“导出私钥”方式导出，这样可以保证证书受密码保护，以防别人盗用。另外，证书只能保存到你有读写权限的目录下)。
　　4.保存好证书 
　　注意将PFX文件保存好。以后重装系统之后无论在哪个用户下只要双击这个证书文件，导入这个私人证书就可以访问NTFS系统下由该证书的原用户加密的文件夹(注意：使用备份恢复功能备份的NTFS分区上的加密文件夹是不能恢复到非NTFS分区的)。

　　最后要提一下，这个证书还可以实现下述用途：
　　(1)给予不同用户访问加密文件夹的权限
　　将我的证书按“导出私钥”方式导出，将该证书发给需要访问这个文件夹的本机其他用户。然后由他登录，导入该证书，实现对这个文件夹的访问。
　　(2)在其也WinXP机器上对用“备份恢复”程序备份的以前的加密文件夹的恢复访问权限
　　将加密文件夹用“备份恢复”程序备份，然后把生成的Backup.bkf连同这个证书拷贝到另外一台WinXP机器上，用“备份恢复”程序将它恢复出来(注意：只能恢复到NTFS分区)。然后导入证书，即可访问恢复出来的文件了。

Win98加密文件夹四法

一、文件夹属性法

　　在“Windows资源管理器”窗口，右键单击要加密的文件夹，单击“属性”，选中“隐藏”复选框。在注册表的“HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\explorer\Advanced\Folder\Hidden\SHOWALL”分支下，将“CheckedValue”的键值设置为数字“0”。以后，即使在“Windows资源管理器”窗口，单击“查看”菜单中的“文件夹选项”，单击“查看”选项卡，选中“显示所有文件”复选钮，也无法看到具有隐藏属性的文件夹。

二、“回收站”法

　　首先确认选中了“显示所有文件”复选钮，并且注册表中“CheckedValue”的键值为“1”。然后，在“Windows资源管理器”窗口，右键单击“C:\RECYCLED”文件夹(这是C盘上“回收站”对应的文件夹)，再单击“属性”，单击“常规”选项卡，清除“启用缩略图方式查看”和“只读”复选框，单击“确定”按钮。关闭并重新启动“Windows资源管理器”后，将会看到“C:\RECYCLED”文件夹中有一个desktop.ini文件。把该文件复制到要加密的文件夹中，并把该文件夹设为“只读”属性。

三、“文件管理器”法

　　单击“开始/运行”，键入“winfile”，单击“确定”按钮，打开“文件管理器”窗口，单击“查看”菜单中的“按文件类型”，选中“显示隐藏/系统文件”复选框，单击“确定”按钮。把要加密的文件夹拖到“C:\RECYCLED”文件夹或者其他分区的“RECYCLED”文件夹。这样，在“我的电脑”或“Windows资源管理器”窗口中就看不到这个文件夹了。

四、设置密码法

　　1、打开“资源管理器”，选定要加密或要保护的文件夹(文件目录)，在其中空白处单击鼠标右键，选择“自定义文件夹…”选项；
    2、在“自定义文件夹”的复选框中，选择“创建或编辑HTML文档”，并单击“下一步”，系统准备启动HTML编辑器；
    3、单击“下一步”，系统启动HTML编辑器，自动打开Folder.htt文档；
    4、编辑Folder.htt文档，搜索“JavaScript”字符，在下方顶头输入以下3行内容：

　　var pass = prompt("请输入密码")

　　if(pass != "ABC")

　　{window.location="E:"};

　　5、保存Folder.htt文档并退出编辑，选择“完成”；到此，对文件夹的加密或保护便已完成；
    6、加密测试，关闭已打开的所有文档及文件夹，重新打开“资源管理器”，点击已加密的文件夹，系统便会提示输入密码，输入正确的密码(本文设定的密码为ABC)就可以访问该文件夹，反之则会转入E盘而无法访问，从而保护该文件夹及其中的文档。